<%
=begin%>
<div class="container">
  <h2>Houses</h2>
  <div id="myCarousel1" class="carousel slide" data-ride="carousel">
    <ol class="carousel-indicators">
      <% @houses.each_with_index do |obj, i| %>
        <li data-target="#myCarousel1" data-slide-to="<%= i %>" class="<% i==0 ? 'active' : '' %>"></li>
      <% end %>
    </ol>

    <div class="carousel-inner">
      <% @houses.each_with_index do |obj, i| %>
        <div class="item <%= i==0 ? 'active' : '' %>">
          <%= image_tag(rails_blob_path(obj.image), style: 'width: 100%;height:500px' ) if obj.image.attached? %>
        </div>
      <% end %>

    </div>

    <div class="left carousel-control" href="#myCarousel1" data-slide="prev">
      <span class="glyphicon glyphicon-chevron-left"></span>
      <span class="sr-only">Previous</span>
    </div>
    <div class="right carousel-control" href="#myCarousel1" data-slide="next">
      <span class="glyphicon glyphicon-chevron-right"></span>
      <span class="sr-only">Next</span>
    </div>
  </div>
</div>

<div class="container">
  <h2>Commercial Unit</h2>
  <div id="myCarousel2" class="carousel slide" data-ride="carousel">
    <ol class="carousel-indicators">
      <% @commercial_units.each_with_index do |obj, i| %>
        <li data-target="#myCarousel2" data-slide-to="<%= i %>" class="<% i==0 ? 'active' : '' %>"></li>
      <% end %>
    </ol>

    <div class="carousel-inner">
      <% @commercial_units.each_with_index do |obj, i| %>
        <div class="item <%= i==0 ? 'active' : '' %>">
          <%= image_tag(rails_blob_path(obj.image), style: 'width: 100%;height:500px' ) if obj.image.attached? %>
        </div>
      <% end %>

    </div>

    <div class="left carousel-control" href="#myCarousel2" data-slide="prev">
      <span class="glyphicon glyphicon-chevron-left"></span>
      <span class="sr-only">Previous</span>
    </div>
    <div class="right carousel-control" href="#myCarousel2" data-slide="next">
      <span class="glyphicon glyphicon-chevron-right"></span>
      <span class="sr-only">Next</span>
    </div>
  </div>
</div>

<div class="container">
  <h2>Complex Buildings</h2>
  <div id="myCarousel3" class="carousel slide" data-ride="carousel">
    <ol class="carousel-indicators">
      <% @complex_buildings.each_with_index do |obj, i| %>
        <li data-target="#myCarousel3" data-slide-to="<%= i %>" class="<% i==0 ? 'active' : '' %>"></li>
      <% end %>
    </ol>

    <div class="carousel-inner">
      <% @complex_buildings.each_with_index do |obj, i| %>
        <div class="item <%= i==0 ? 'active' : '' %>">
          <%= image_tag(rails_blob_path(obj.image), style: 'width: 100%;height:500px' ) if obj.image.attached? %>
        </div>
      <% end %>

    </div>

    <div class="left carousel-control" href="#myCarousel3" data-slide="prev">
      <span class="glyphicon glyphicon-chevron-left"></span>
      <span class="sr-only">Previous</span>
    </div>
    <div class="right carousel-control" href="#myCarousel3" data-slide="next">
      <span class="glyphicon glyphicon-chevron-right"></span>
      <span class="sr-only">Next</span>
    </div>
  </div>
</div>
<%
=end%>

<div class="py-5">
  <div class="container">
    <div class="row hidden-md-up">
      <% @data.each do |obj| %>
        <div class="col-md-4">
          <div class="card">
            <div class="card-block">
              <%= image_tag(rails_blob_path(obj.image), style: 'width: 330px;height:200px', class: 'image' ) if obj.image.attached? %>
              <div class="middle">
                <div class="text">
                  <div class="card-subtitle"><%= obj.class %></div>
                  <div class="card-subtitle"><%= "Owner: #{obj.owner}" %></div>
                  <div class="card-subtitle"><%= "Address: #{obj.address}" %></div>
                  <div class="card-subtitle"><%= "Sqmt: #{obj.sqmt}" %></div>

                  <% if obj.class == House %>
                    <div class="card-subtitle"><%= "Rooms: #{obj.rooms}" %></div>
                    <div class="card-subtitle"><%= "Floors: #{obj.floors}" %></div>
                    <div class="card-subtitle"><%= "AC: #{obj.air_cond}" %></div>
                  <% elsif obj.class == ComplexBuilding %>
                    <div class="card-subtitle"><%= "Units: #{obj.units}" %></div>
                  <% elsif obj.class == CommercialUnit %>
                    <div class="card-subtitle"><%= "Shops: #{obj.shops}" %></div>
                    <div class="card-subtitle"><%= "Parking: #{obj.parking}" %></div>
                  <% end %>
                </div>
              </div>
            </div>
            <div class="card-footer">
              <div class="price">Price: $10</div>
              <%= button_to "Buy", purchase_path(klass: obj.class.to_s, id: obj.id), class: "buy_btn btn btn-primary" %>
            </div>
          </div>
        </div>
      <% end %>
    </div>

  </div>
</div>

<style type="text/css">
  .card {
    position: relative;
    display: flex;
    flex-direction: column;
    background-color: #fff;
    border: 1px solid rgba(0, 0, 0, 0.125);
    border-radius: 0.25rem;
    margin-bottom: 20px;
  }

  .card-block {
    flex: 1 1 auto;
    padding: 1.25rem;
    position: relative;
    width: 50%;
  }

  .price{
    padding: 0 1.25rem;
    font-size: 1.5rem;
    font-weight: bold;
    float: left;
    margin-top: 5px;
  }

  .buy_btn{
    float: right;
    margin-right: 8px;
  }

  .image {
    opacity: 1;
    display: block;
    width: 100%;
    height: auto;
    transition: .5s ease;
    backface-visibility: hidden;
  }

  .middle {
    transition: .5s ease;
    opacity: 0;
    position: absolute;
    top: 50%;
    left: 100%;
    transform: translate(-50%, -50%);
    -ms-transform: translate(-50%, -50%);
    text-align: center;
    width: 100%;
  }

  .card-block:hover .image {
    opacity: 0.3;
  }

  .card-block:hover .middle {
    opacity: 1;
  }

  .text {
    background-color: #4CAF50;
    color: white;
    font-size: 16px;
    padding: 10px;
  }

  .card-footer{
    display: inline-block;
    margin-bottom: 8px;
    /*display: flex;*/
    /*justify-content: space-between;*/
  }

</style>
